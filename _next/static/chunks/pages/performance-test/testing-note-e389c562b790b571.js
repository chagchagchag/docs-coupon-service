(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93],{6195:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/performance-test/testing-note",function(){return s(5079)}])},5079:function(e,t,s){"use strict";s.r(t),s.d(t,{__toc:function(){return x},default:function(){return j}});var r=s(5893),n=s(2673),a=s(373),i=s(8426);s(9128);var o=s(2643),c={src:"/docs-coupon-service/_next/static/media/1.64148b5a.png",height:1476,width:1970,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAkklEQVR42mNYvWHt1u3btu3YsXHL5nUb123aumXz1q2btmxmgIOW7vxps+dr2DhA+ao2hmq2ppJmijt2T7x6fX9zZ4a0mbi6rRmDuKmmhKkGl4F2XKbt3E0peXXODHIKshZaDJKmmmJgOQY5JQYGGQZFVQkzTTETDQYJY3VRY3UxY3V5c01lax0ZMw1RI3UxEw0AqycpyTm/R54AAAAASUVORK5CYII=",blurWidth:8,blurHeight:6},l={src:"/docs-coupon-service/_next/static/media/2.fceb0c55.png",height:632,width:1334,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAX0lEQVR42h2JCQqAIADA/E1Fh+SRpimSpmhi5P8fkwRjMAaMr8KUTVqpLUS8n1DzsjJAuaZcLWg3Nvr4uFCYPCEWAJIDM92NxPkc85tyJdwMM21D4E0NM7E+XeFu/Ek/V9MWRyqOcTIAAAAASUVORK5CYII=",blurWidth:8,blurHeight:4},d={src:"/docs-coupon-service/_next/static/media/3.24fa5898.png",height:271,width:786,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAAUElEQVR42mNw8stw8su0dE20dvAwt7IzMrPRNTTX0DFksLJ1MbGw0ze2MjKxAjKcXD2Nzax1jSwZ9IwsdAzMjc1tgRKWNk6GptYmZjZWts4Ahm0Qgh4uQVoAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3},A={src:"/docs-coupon-service/_next/static/media/LIST-1.6278594c.png",height:648,width:891,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAcUlEQVR42k1LSQrCQBCsXmbQ4ILgazx48v8PURQEJ5IMPZ1ODiFFURsU3e4Pq1V3l/3hKoJSBmKu/4+KSspUysuGJ7m8vz9vLeXM/dhbN/IR55N0sArWlM2awkEUb2EO86hwj0WBOS0EY0VkAogWxRYTOCoqtCJCrS8AAAAASUVORK5CYII=",blurWidth:8,blurHeight:6},h={src:"/docs-coupon-service/_next/static/media/LIST-2.1d3620fd.png",height:684,width:853,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAcElEQVR42j1LywrCQAyczKYIPVTEm7/ixaP//x+KhaKum92YtrSThAzzkOvtTkfxdDxdrFrOhaTA1JvxIGUax8crVTynrxVTVb7zp/a/bkj9wHMkGlW75qICCISgzCzgDo9HAB67TogbuKSw3NzajT+xty3ElfTdxwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:6},u={src:"/docs-coupon-service/_next/static/media/SET.ad91d499.png",height:656,width:938,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAc0lEQVR42j3LUQrCQBAD0GQ2U4XqAbyKH355/0P4LWKLtHbrdtwW9MHAkBCeL1cASym7w6ltj8P4LiWIopSSy/p++jxvQ8c5z69hdEl5yp7290fXuC8RRkpNfQTAzFx1SgtiFSREMhAbrPejLQCNFcB/8QUfjjR2gZarMAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:6},p={src:"/docs-coupon-service/_next/static/media/GRAFANA-COUPON-API.f827e301.png",height:1476,width:1970,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAlklEQVR42gUAuQ6CMLSTo4kmYjyipS3l6qO0XAGjjjqAi7egERP8/08giNFsNA2YBdyRmMJ8SVaYmWuCukY1Z7wPeWQw7FsGWRCwJvYMXW+6OtGyAjSgrsc926Yiw55C3T+rG77dieHY9IVKUv7+FK86Qkm+AZ3IuFBpSpz8co/Lij+eGAkIIYh8kIHUhIWHo25/8bd1e7LwHIqIMeA8AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6},g={src:"/docs-coupon-service/_next/static/media/GRAFANA-COUPON-ISSUER.4226309f.png",height:1476,width:1970,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAe0lEQVR42gVASQ7CIBT9wyuCpabeRFfe/ziuTDoBpfANv1+fJSWwdaPWNacFELWGqZ66beSgZ/8+JV9lGu+/nLD4YZ0GkEtUZg2PyOZmmBdh7Y27Wa0ns+YqINLWIZAwRn9zPgZihZftWMtVkI9dScp+sMhlFaJDiL3ZHz9dPqrlYc0jAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6};let x=[{depth:2,value:"테스팅 기록",id:"테스팅-기록"},{depth:3,value:"Coupon 데이터 생성",id:"coupon-데이터-생성"},{depth:3,value:"Locust",id:"locust"},{depth:3,value:"데이터 저장 확인",id:"데이터-저장-확인"},{depth:3,value:"레디스 확인",id:"레디스-확인"},{depth:4,value:"데이터 요청 대기열 확인",id:"데이터-요청-대기열-확인"},{depth:4,value:"데이터 요청 기록 SET 확인",id:"데이터-요청-기록-set-확인"},{depth:4,value:"Grafana 확인",id:"grafana-확인"}];function _createMdxContent(e){let t=Object.assign({h2:"h2",h3:"h3",p:"p",pre:"pre",code:"code",span:"span",img:"img",h4:"h4"},(0,o.a)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"테스팅-기록",children:"테스팅 기록"}),"\n",(0,r.jsx)(t.h3,{id:"coupon-데이터-생성",children:"Coupon 데이터 생성"}),"\n",(0,r.jsx)(t.p,{children:"쿠폰의 발급 가능한 총 개수를 1000 으로 설정했습니다. 1100 명의 사용자가 요청을 하더라도 1000명 까지만 발급이 가능합니다."}),"\n",(0,r.jsx)(t.pre,{"data-language":"sql","data-theme":"default",filename:"schema.sql",hasCopyCode:!0,children:(0,r.jsxs)(t.code,{"data-language":"sql","data-theme":"default",children:[(0,r.jsxs)(t.span,{className:"line",children:[(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-keyword)"},children:"INSERT INTO"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" coupon.coupons("})]}),"\n",(0,r.jsx)(t.span,{className:"line",children:(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    title, coupon_assign_type, total_quantity, issued_quantity, discount_amount,"})}),"\n",(0,r.jsx)(t.span,{className:"line",children:(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"    min_available_amount, issue_start_datetime, issue_end_datetime, created_datetime, updated_datetime"})}),"\n",(0,r.jsx)(t.span,{className:"line",children:(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:")"})}),"\n",(0,r.jsxs)(t.span,{className:"line",children:[(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-keyword)"},children:"VALUES"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,r.jsxs)(t.span,{className:"line",children:[(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'50% 세일. 과연 누가 주인공이 될 것인가?'"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'FIFO'"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-constant)"},children:"1000"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-constant)"},children:"50"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,r.jsxs)(t.span,{className:"line",children:[(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"           "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-constant)"},children:"1000"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'2024-01-01 00:00:01'"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'2024-11-11 23:59:59'"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'2023-12-31 23:00:00'"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:", "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'2023-12-31 23:00:00'"})]}),"\n",(0,r.jsx)(t.span,{className:"line",children:(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"       );"})}),"\n",(0,r.jsx)(t.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(t.span,{className:"line",children:[(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-keyword)"},children:"COMMIT"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:";"})]})]})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(t.h3,{id:"locust",children:"Locust"}),"\n",(0,r.jsxs)(t.p,{children:["먼저 Locust 에서 아래의 세팅을 통해서 아래의 테스트 조건을 걸어주고 테스트를 시작합니다.\r\n",(0,r.jsx)(t.img,{placeholder:"blur",src:c})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(t.h3,{id:"데이터-저장-확인",children:"데이터 저장 확인"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"coupon_issues"})," 테이블에는 아래와 같이 1000개의 coupon 이 정상적으로 저장되어 있음을 확인 가능합니다.",(0,r.jsx)("br",{}),"\r\n",(0,r.jsx)(t.img,{placeholder:"blur",src:l})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"coupons"})," 테이블에는 아래와 같이 정상적으로 ",(0,r.jsx)(t.code,{children:"issued_quantity"})," 가 1000 으로 정상적으로 세팅된 것을 확인 가능합니다.",(0,r.jsx)("br",{}),"\r\n",(0,r.jsx)(t.img,{placeholder:"blur",src:d})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(t.h3,{id:"레디스-확인",children:"레디스 확인"}),"\n",(0,r.jsx)(t.h4,{id:"데이터-요청-대기열-확인",children:"데이터 요청 대기열 확인"}),"\n",(0,r.jsxs)(t.p,{children:["요청 대기열은 아래와 같이 테스트 초기에는 936 개의 요청을 저장하고 있습니다.\r\n",(0,r.jsx)(t.img,{placeholder:"blur",src:A})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(t.p,{children:["잠시 동안의 순간에 Refresh 버튼을 눌러서 새로 변경된 내용을 조회해보면 아래와 같이 473 개의 요청으로 줄어들어 있습니다.",(0,r.jsx)("br",{}),"\r\n정상적으로 작업 대기열이 비워지고 있습니다.",(0,r.jsx)("br",{}),"\r\n",(0,r.jsx)(t.img,{placeholder:"blur",src:h})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(t.h4,{id:"데이터-요청-기록-set-확인",children:"데이터 요청 기록 SET 확인"}),"\n",(0,r.jsxs)(t.p,{children:["SortedSet 을 사용할수도 있겠지만, Set과 List 를 조합한 Fifo 구조로 작업 대기열을 구성했는데, List 를 통해 FIFO 를 구현했고, 요청 각각은 Set 을 통해 요청 고유값을 식별합니다. 따라서 Set 의 Size 가 1000 개라면 정상적으로 요청을 모두 받아두었다는 것을 확인 가능합니다.\r\n",(0,r.jsx)(t.img,{placeholder:"blur",src:u})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(t.h4,{id:"grafana-확인",children:"Grafana 확인"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"coupon-api"})," 의 상태를 그라파나를 통해 확인해봅니다. locust 를 통해 ",(0,r.jsx)(t.code,{children:"coupon-api"})," 로 유입되어서 톰캣 커넥션 수가 증가하고, 레디스에 접근하는 IO 작업 역시 증가함을 확인 가능합니다.\r\n",(0,r.jsx)(t.img,{placeholder:"blur",src:p})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"coupon-issuer"})," 의 상태입니다.\r\n",(0,r.jsx)(t.img,{placeholder:"blur",src:g})]}),"\n",(0,r.jsx)("br",{})]})}let m={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,o.a)(),e.components);return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/performance-test/testing-note.mdx",route:"/performance-test/testing-note",timestamp:1707897431e3,pageMap:[{kind:"MdxPage",name:"about",route:"/about"},{kind:"Folder",name:"coding-style",route:"/coding-style",children:[{kind:"MdxPage",name:"factory-mapper-usage",route:"/coding-style/factory-mapper-usage"},{kind:"MdxPage",name:"multi-module-usage",route:"/coding-style/multi-module-usage"},{kind:"MdxPage",name:"service-object-usage",route:"/coding-style/service-object-usage"},{kind:"Meta",data:{"service-object-usage":"@Service 를 프록시 객체로만 사용","factory-mapper-usage":"객체생성은 factory, mapper 컴포넌트를 사용","multi-module-usage":"멀티모듈 구성 원칙"}}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"performance-test",route:"/performance-test",children:[{kind:"MdxPage",name:"grafana-dashboard-setting",route:"/performance-test/grafana-dashboard-setting"},{kind:"MdxPage",name:"locust-setting",route:"/performance-test/locust-setting"},{kind:"MdxPage",name:"testing-note",route:"/performance-test/testing-note"},{kind:"Meta",data:{"grafana-dashboard-setting":"Grafana Dashboard 세팅","locust-setting":"locust 세팅","testing-note":"테스팅 노트"}}]},{kind:"Folder",name:"project-overview",route:"/project-overview",children:[{kind:"MdxPage",name:"locust-setting",route:"/project-overview/locust-setting"},{kind:"MdxPage",name:"module-structure",route:"/project-overview/module-structure"},{kind:"MdxPage",name:"prometheus-grafana-setting",route:"/project-overview/prometheus-grafana-setting"},{kind:"MdxPage",name:"tech-stack",route:"/project-overview/tech-stack"},{kind:"Meta",data:{"tech-stack":"Tech Stack","module-structure":"멀티 모듈 구조","locust-setting":"locust 세팅","prometheus-grafana-setting":"prometheus, grafana 세팅"}}]},{kind:"Folder",name:"redis-summary",route:"/redis-summary",children:[{kind:"MdxPage",name:"redis-data-structures",route:"/redis-summary/redis-data-structures"},{kind:"MdxPage",name:"spring-data-redis",route:"/redis-summary/spring-data-redis"},{kind:"Meta",data:{"redis-data-structures":"레디스 자료구조들","spring-data-redis":"Spring Data Redis"}}]},{kind:"Meta",data:{index:"Introduction","project-overview":"Project Overview","coding-style":"코딩스타일","performance-test":"성능테스트","redis-summary":"레디스 관련 개념들",about:{title:"About",type:"page"},contact:{title:"Contact ↗",type:"page",href:"-",newWindow:!0}}}],flexsearch:{codeblocks:!0},title:"Testing Note",headings:x},pageNextRoute:"/performance-test/testing-note",nextraLayout:a.ZP,themeConfig:i.Z};var j=(0,n.j)(m)},8426:function(e,t,s){"use strict";var r=s(5893);s(7294);let n={logo:(0,r.jsx)("span",{children:"My Project"}),project:{link:"https://github.com/chagchagchag/docs-coupon-service"},docsRepositoryBase:"https://github.com/chagchagchag/docs-coupon-service",footer:{text:"Nextra Docs Template"}};t.Z=n},5789:function(){}},function(e){e.O(0,[774,796,888,179],function(){return e(e.s=6195)}),_N_E=e.O()}]);