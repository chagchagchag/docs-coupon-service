(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[691],{3877:function(s,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project-overview/locust-setting",function(){return n(220)}])},220:function(s,e,n){"use strict";n.r(e),n.d(e,{__toc:function(){return u},default:function(){return v}});var r=n(5893),o=n(2673),l=n(373),i=n(8426);n(9128);var t=n(2643),a={src:"/docs-coupon-service/_next/static/media/1.865eee30.png",height:1537,width:1854,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAIAAAC6O5sJAAAAlUlEQVR42g3LWRKCMBBF0SzXpbkJl2GhiAUyWkCGTuhOJ0Ewn+/VueJeTGW1lpX69NgO2HRbO/i68wIAmDlF3vcYI8cU2GgpSWgN1uJ3xnlBqazSdlnBOhLWISIpc0W8E/3y8JzTJDJn9uAuzt2IzhDYew4hCk8spe6Hd0oEsI3TnF/mIFZj6nYsHt1xnFk8X82eCfEfeKec2wR6uMMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:7},c={src:"/docs-coupon-service/_next/static/media/2.f06f46ba.png",height:1100,width:1802,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAgUlEQVR42mO49+jW48fXnz599ggMHj958uz58ydPnzJYebs7BwS5BHmnl2RmlmT7RARbe7k4+LkxMOjKMqgwi5nq7Ny9+9Spk8WVZQwMDPxGqgyyFroixuq6jhar1689cPJoUX0lgwCDqo0Rg7ipJgSp2Zn4lqeZRHhya8lJmGkBABkmMOjtMs0GAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:5},h={src:"/docs-coupon-service/_next/static/media/3.97b86259.png",height:1180,width:1801,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAeUlEQVR42mPYvGPrvv379h/cv3PPzu1AuGfP7r17d+3ZzQAHtW11PZN7Hfw8oHxVGyN5C11jV9uDhw9du3atsa2ZQYxB19GCQcJUU8REXd5Kr7imvHfZ7LCCVAZZdllLXQYxY3UxYw1hIzUGIGBhYNCWkjTRFDVWBwBFKSdQgDqUcAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:5},d={src:"/docs-coupon-service/_next/static/media/4.1d371553.png",height:900,width:1899,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAaUlEQVR42mPYvmfn/gMH9h88uHvfvp27du3cs3vXtq0rZ81iENNTZZBiYGBjYJBlYBBlYOBkYJBhYNCQYJCz0NO0M1GxMlSzMQIiVWsjNWtDJQs9Bks3Oz4DZXFjDVEjdVFjEAIyxEw0AAyiGqE5QA3TAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4},p={src:"/docs-coupon-service/_next/static/media/5.898f397f.png",height:1946,width:1875,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAk0lEQVR42m2NuxKCMBQF70kCBNBCG7/DsfKvHWf8JSx9MAjePI6hd7fbZnG5XdvKJ+ZiioGAUX0Mg8hB/oLT+SiWiRCKWAFXNUQX62aZpnmZ+66BYlx0W5vA7FRfNF/fminOlUPTARUZ6LzfaHCaU+9NjCyMQTQkN370/nwDZQBjQYg1ZQqnEnb7bg0ks0gmKJH5B7shWhxaoDeQAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},x={src:"/docs-coupon-service/_next/static/media/7.f6358433.png",height:466,width:1901,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAIAAADq9gq6AAAAOklEQVR42mPYsHXT7r17duzetW3Hjs1bNm/aumXL+vWLp05hYJBgYJBiYOBn4NZTYNCQZBBkAAF2BgCD/hGlEGPDYQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:2},k={src:"/docs-coupon-service/_next/static/media/6.8f549aa4.png",height:557,width:1900,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAIAAADq9gq6AAAAM0lEQVR42mNYvGLpmnVrV61dA0TLVixfumL5ssWLZvR2M8iYaitbGTJAgACYZGFg0FcEAGDpEPCr8+opAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:2},j={src:"/docs-coupon-service/_next/static/media/9.4994a8bf.png",height:741,width:1901,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAAT0lEQVR42mNYtX7Nlm1bt2zbBkTrN25Yt3HDhtWrFkyayGDkZG3l6cwgxgACMgxABhAJWegxBMdFxqYlWXo6KVkZWHo6mrk7GDlb23m7AACyUhkTzL1E7AAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:3};let u=[{depth:2,value:"locust 세팅하기",id:"locust-세팅하기"},{depth:2,value:"참고",id:"참고"},{depth:2,value:"API 정의",id:"api-정의"},{depth:2,value:"docker-compose",id:"docker-compose"},{depth:2,value:"python 파일 정의",id:"python-파일-정의"},{depth:2,value:"실행",id:"실행"},{depth:2,value:"Docker Desktop 확인",id:"docker-desktop-확인"},{depth:2,value:"locust 애플리케이션 접속",id:"locust-애플리케이션-접속"},{depth:2,value:"load 설정",id:"load-설정"},{depth:2,value:"load 테스트",id:"load-테스트"}];function _createMdxContent(s){let e=Object.assign({h2:"h2",p:"p",ul:"ul",li:"li",a:"a",pre:"pre",code:"code",span:"span",img:"img"},(0,t.a)(),s.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"locust-세팅하기",children:"locust 세팅하기"}),"\n",(0,r.jsxs)(e.p,{children:["locust 는 성능부하를 테스트하기 위한 테스트입니다. docker-compose 등을 통해 스케일링이 가능하고, 기본으로 제공하는 dashboard 도 강력하기에 성능부하를 실험하고, 측정하기에 용이한 도구입니다.",(0,r.jsx)("br",{})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.h2,{id:"참고",children:"참고"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://locust.io/",children:"locust.io"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://docs.locust.io/en/stable/",children:"docs.locust.io/en/stable"})}),"\n"]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.h2,{id:"api-정의",children:"API 정의"}),"\n",(0,r.jsx)(e.p,{children:"테스트할 API 를 정의합니다."}),"\n",(0,r.jsx)(e.pre,{"data-language":"java","data-theme":"default",filename:"CouponApiController.java",hasCopyCode:!0,children:(0,r.jsxs)(e.code,{"data-language":"java","data-theme":"default",children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"@"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"RequiredArgsConstructor"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"@"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"RestController"})]}),"\n",(0,r.jsxs)(e.span,{className:"line highlighted",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"public"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"CouponApiController"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"private"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"final"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"CouponApplicationService"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" couponApplicationService;"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    @"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"PostMapping"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"/coupon/issue"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"public"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"CouponIssueResponse"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"issue"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(@"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"RequestBody"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"CouponIssueRequest"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" request){"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"couponApplicationService"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"issueAsync"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"(request);"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"new"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"CouponIssueResponse(SUCCESS"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"SUCCESS"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"getMessageKr())"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:" "}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(e.p,{children:["위의 코드에서 CouponApplicationService 클래스 내의 issueAsync(request) 메서드는 아무 동작도 하지 않는 비어있는 메서드입니다.",(0,r.jsx)("br",{})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.h2,{id:"docker-compose",children:"docker-compose"}),"\n",(0,r.jsx)(e.p,{children:"docker-compose 파일을 아래와 같이 작성해줍니다."}),"\n",(0,r.jsx)(e.pre,{"data-language":"dockerfile","data-theme":"default",filename:"docker-compose.yml",hasCopyCode:!0,children:(0,r.jsxs)(e.code,{"data-language":"dockerfile","data-theme":"default",children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"version: "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'3.7'"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"services:"})}),"\n",(0,r.jsx)(e.span,{className:"line highlighted",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  master:"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    image: locustio/locust"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    ports:"})}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      - "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"8089:8089"'})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    volumes:"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      - ./:/mnt/locust"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    command: -f /mnt/locust/locustfile-coupon-request.py --master -H http://host.docker.internal:8080"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:" "}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"  worker:"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    image: locustio/locust"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    volumes:"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"      - ./:/mnt/locust"})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    command: -f /mnt/locust/locustfile-coupon-request.py --worker --master-host master"})})]})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.h2,{id:"python-파일-정의",children:"python 파일 정의"}),"\n",(0,r.jsx)(e.pre,{"data-language":"python","data-theme":"default",filename:"locustfile-coupon-request.py",hasCopyCode:!0,children:(0,r.jsxs)(e.code,{"data-language":"python","data-theme":"default",children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" random"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" locust "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" task"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" FastHttpUser"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" stats"})]}),"\n",(0,r.jsx)(e.span,{className:"line highlighted",children:" "}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"stats"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"PERCENTILES_TO_CHART "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"0.95"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"0.99"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"]"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:" "}),"\n",(0,r.jsx)(e.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"CouponRequest"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"FastHttpUser"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    connection_timeout "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"10.0"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    network_timeout "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"10.0"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"@task"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"issue"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-parameter)"},children:"self"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"        payload "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:"{"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"userId"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" random"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"randint"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"10000000"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:"),"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"couponId"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"1"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:"}"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"with"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" self"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"rest"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"POST"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"/coupon/issue"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:", json"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:"payload):"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"            "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"pass"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:" "})]})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.h2,{id:"실행",children:"실행"}),"\n",(0,r.jsx)(e.p,{children:"아래의 명령어를 통해 실행합니다."}),"\n",(0,r.jsx)(e.pre,{"data-language":"bash","data-theme":"default",filename:"run-docker-compose.sh",hasCopyCode:!0,children:(0,r.jsx)(e.code,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"docker-compose"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"-d"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"--scale"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"worker="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"3"})]})})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.h2,{id:"docker-desktop-확인",children:"Docker Desktop 확인"}),"\n",(0,r.jsxs)(e.p,{children:["아래와 같이 worker 3기, master 1의 구성으로 docker 애플리케이션이 구동된 모습을 확인 가능합니다.\r\n",(0,r.jsx)(e.img,{placeholder:"blur",src:a})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.h2,{id:"locust-애플리케이션-접속",children:"locust 애플리케이션 접속"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{placeholder:"blur",src:c})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.h2,{id:"load-설정",children:"load 설정"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{placeholder:"blur",src:h})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.code,{children:"Number of users"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"몇명의 사용자까지 만들어낼 것인지"}),"\n",(0,r.jsx)(e.li,{children:"위의 사진에서는 10만명까지의 유입을 만들어내겠다는 의미"}),"\n"]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.code,{children:"Spawn rate"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"1초에 몇명의 사용자를 생성해낼 것인지"}),"\n",(0,r.jsx)(e.li,{children:"위의 사진에서는 1초에 1000명씩 유저를 생성되어서 유입되게끔 했습니다."}),"\n",(0,r.jsx)(e.li,{children:"1초: 1000명, 2초: 2000명, 3초: 3000명, ... 100초 : 100000명"}),"\n"]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.code,{children:"Host"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"요청을 보낼 주소"}),"\n"]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.h2,{id:"load-테스트",children:"load 테스트"}),"\n",(0,r.jsxs)(e.p,{children:["로드를 ",(0,r.jsx)(e.code,{children:"spawning"})," 하고 있는 모습\r\n",(0,r.jsx)(e.img,{placeholder:"blur",src:d})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(e.p,{children:["차트 탭\r\n",(0,r.jsx)(e.img,{placeholder:"blur",src:p})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(e.p,{children:["Failures 탭\r\n요청이 실패한 것의 기록이다.\r\n",(0,r.jsx)(e.img,{placeholder:"blur",src:x})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(e.p,{children:["이번에는 Workers 탭으로 이동한다. 자세히 보면 CPU 사용률이 100% 이상으로 올라가고 있다.\r\n",(0,r.jsx)(e.img,{placeholder:"blur",src:k})]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.p,{children:"worker 들의 로드를 줄여주기 위해 이번에는 worker 수를 7개로 늘려봅니다."}),"\n",(0,r.jsx)(e.pre,{"data-language":"bash","data-theme":"default",filename:"bash",hasCopyCode:!0,children:(0,r.jsx)(e.code,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"$"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"docker-compose"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"scale"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string)"},children:"worker="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"7"})]})})}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(e.p,{children:["각 worker 의 cpu 사용량은 줄어들었습니다.\r\n",(0,r.jsx)(e.img,{placeholder:"blur",src:j})]}),"\n",(0,r.jsx)("br",{})]})}let y={MDXContent:function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,t.a)(),s.components);return e?(0,r.jsx)(e,{...s,children:(0,r.jsx)(_createMdxContent,{...s})}):_createMdxContent(s)},pageOpts:{filePath:"pages/project-overview/locust-setting.mdx",route:"/project-overview/locust-setting",timestamp:1707139758e3,pageMap:[{kind:"MdxPage",name:"about",route:"/about"},{kind:"Folder",name:"coding-style",route:"/coding-style",children:[{kind:"MdxPage",name:"factory-mapper-usage",route:"/coding-style/factory-mapper-usage"},{kind:"MdxPage",name:"multi-module-usage",route:"/coding-style/multi-module-usage"},{kind:"MdxPage",name:"simplify-object-dependency",route:"/coding-style/simplify-object-dependency"},{kind:"Meta",data:{"service-object-usage":"객체 간 의존성 단순화 (순환참조 방지)","factory-mapper-usage":"객체생성은 factory, mapper 컴포넌트를 사용","multi-module-usage":"멀티모듈 구성 원칙","simplify-object-dependency":"Simplify Object Dependency"}}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"performance-test",route:"/performance-test",children:[{kind:"MdxPage",name:"grafana-dashboard-setting",route:"/performance-test/grafana-dashboard-setting"},{kind:"MdxPage",name:"locust-setting",route:"/performance-test/locust-setting"},{kind:"MdxPage",name:"testing-note",route:"/performance-test/testing-note"},{kind:"Meta",data:{"grafana-dashboard-setting":"Grafana Dashboard 세팅","locust-setting":"locust 세팅","testing-note":"테스팅 노트"}}]},{kind:"Folder",name:"project-overview",route:"/project-overview",children:[{kind:"MdxPage",name:"locust-setting",route:"/project-overview/locust-setting"},{kind:"MdxPage",name:"module-structure",route:"/project-overview/module-structure"},{kind:"MdxPage",name:"prometheus-grafana-setting",route:"/project-overview/prometheus-grafana-setting"},{kind:"MdxPage",name:"tech-stack",route:"/project-overview/tech-stack"},{kind:"Meta",data:{"tech-stack":"Tech Stack","module-structure":"멀티 모듈 구조","locust-setting":"locust 세팅","prometheus-grafana-setting":"prometheus, grafana 세팅"}}]},{kind:"Folder",name:"redis-summary",route:"/redis-summary",children:[{kind:"MdxPage",name:"redis-data-structures",route:"/redis-summary/redis-data-structures"},{kind:"MdxPage",name:"spring-data-redis",route:"/redis-summary/spring-data-redis"},{kind:"Meta",data:{"redis-data-structures":"레디스 자료구조들","spring-data-redis":"Spring Data Redis"}}]},{kind:"Meta",data:{index:"Introduction","project-overview":"Project Overview","coding-style":"코딩스타일","performance-test":"성능테스트","redis-summary":"레디스 관련 개념들",about:{title:"About",type:"page"},contact:{title:"Contact ↗",type:"page",href:"-",newWindow:!0}}}],flexsearch:{codeblocks:!0},title:"Locust Setting",headings:u},pageNextRoute:"/project-overview/locust-setting",nextraLayout:l.ZP,themeConfig:i.Z};var v=(0,o.j)(y)},8426:function(s,e,n){"use strict";var r=n(5893);n(7294);let o={logo:(0,r.jsx)("span",{children:"My Project"}),project:{link:"https://github.com/chagchagchag/docs-coupon-service"},docsRepositoryBase:"https://github.com/chagchagchag/docs-coupon-service",footer:{text:"Nextra Docs Template"}};e.Z=o},5789:function(){}},function(s){s.O(0,[774,796,888,179],function(){return s(s.s=3877)}),_N_E=s.O()}]);